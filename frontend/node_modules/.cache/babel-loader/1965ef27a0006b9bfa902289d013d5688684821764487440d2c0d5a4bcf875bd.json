{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\LenovO\\\\Documents\\\\OtherProjects\\\\ColumbariumManagementSystem\\\\frontend\\\\src\\\\pages\\\\dashboard.js\",\n  _s = $RefreshSig$();\nimport Icon from \"../components/icon\";\nimport { useState, useEffect, useRef } from \"react\";\nimport { useAuth } from \"../contexts/AuthContext\";\nimport StatusTag from '../components/dashboard/statusTag';\nimport TabContent from '../components/dashboard/tabContent';\nimport LoadingPage from './loading';\nimport CreateNewElement from \"../components/dashboard/createNewElement\";\nimport EditElement from \"../components/dashboard/editElement\";\nimport AccountModal from \"../components/dashboard/accountModal\";\nimport { fieldsByTab } from \"../config/dashboard/fieldsByTab\";\nimport Tab from '../components/dashboard/tab';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction getCsrf() {\n  const cookies = document.cookie.split(';');\n  for (let i = 0; i < cookies.length; i++) {\n    const cookie = cookies[i].trim();\n    if (cookie.startsWith('csrftoken=')) {\n      return cookie.substring('csrftoken='.length, cookie.length);\n    }\n  }\n}\nexport default function DashboardPage() {\n  _s();\n  const [loading, setLoading] = useState(true);\n  const {\n    username,\n    setUsername\n  } = useAuth();\n  const [selectedTab, setSelectedTab] = useState(\"Customers\");\n  const [sidebarOpen, setSidebarOpen] = useState(true);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [openCreateModal, setOpenCreateModal] = useState(false);\n  const [showEditModal, setShowEditModal] = useState(false);\n  const [tableLoading, setTableLoading] = useState(false);\n  const [selectedElements, setSelectedElements] = useState([]);\n  const [elementToEdit, setElementToEdit] = useState(null);\n  const [elements, setElements] = useState([]);\n  const [openAccountModal, setOpenAccountModal] = useState(false);\n  const accountModalRef = useRef(null);\n  const [filter, setFilter] = useState(\"\");\n  const [customerOptions, setCustomerOptions] = useState([]);\n  const [nicheOptions, setNicheOptions] = useState([]);\n  async function fetchItems(endpoint) {\n    setTableLoading(true);\n    setElements([]);\n    console.log(endpoint, \" fetching items.\");\n    try {\n      await fetch(`http://localhost:8000/api/${endpoint.toLowerCase()}/list-all/`, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n          'Session-Token': sessionStorage.getItem('token'),\n          'Authorization': `Session ${sessionStorage.getItem('token')}`\n        },\n        credentials: 'include'\n      }).then(response => {\n        if (!response.ok) {\n          throw new Error(\"Failed to fetch items\");\n        } else {\n          return response.json();\n        }\n      }).then(data => {\n        const normalizeKey = s => s.replace(/_([a-z])/g, (_, c) => c.toUpperCase());\n        const normalizeObject = obj => {\n          if (obj === null || obj === undefined) return obj;\n          if (Array.isArray(obj)) return obj.map(normalizeObject);\n          if (typeof obj !== 'object') return obj;\n          const res = {};\n          Object.keys(obj).forEach(k => {\n            const newKey = normalizeKey(k);\n            const val = obj[k];\n            res[newKey] = normalizeObject(val);\n          });\n          return res;\n        };\n        setTableLoading(false);\n        const normalized = Array.isArray(data) ? data.map(normalizeObject) : data;\n        setElements(normalized);\n        console.log(\"Fetched items (normalized): \", normalized);\n      });\n    } catch (Exception) {\n      console.log(\"Error fetching items: \", Exception);\n    }\n  }\n\n  // convert camelCase keys used in the UI back to snake_case for the API\n  const camelToSnake = s => s.replace(/([A-Z])/g, m => '_' + m.toLowerCase());\n  const convertKeysToSnake = obj => {\n    if (obj === null || obj === undefined) return obj;\n    if (Array.isArray(obj)) return obj.map(convertKeysToSnake);\n    if (obj instanceof Date) return obj.toISOString();\n    if (typeof obj !== 'object') return obj;\n    const res = {};\n    Object.keys(obj).forEach(k => {\n      const newKey = camelToSnake(k);\n      res[newKey] = convertKeysToSnake(obj[k]);\n    });\n    return res;\n  };\n  const handleEditClick = () => {\n    if (selectedElements.length === 1) {\n      // ensure customer options are loaded when editing Payments\n      const prepareAndShow = async () => {\n        if (selectedTab === 'Payments') await fetchCustomerOptions();\n        setElementToEdit(elements.find(e => e.id === selectedElements[0]));\n        setShowEditModal(true);\n      };\n      prepareAndShow();\n    }\n  };\n  async function handleRemoveSelected(e) {\n    e.preventDefault();\n    if (selectedElements.length === 0) return;\n    const endpoint = selectedTab.toLowerCase();\n    const confirmation = window.confirm(`Are you sure you want to delete ${selectedElements.length} items? This action cannot be undone.`);\n    if (confirmation) {\n      try {\n        await fetch(`http://localhost:8000/api/${endpoint}/delete/`, {\n          method: 'DELETE',\n          headers: {\n            'Content-Type': 'application/json',\n            'Session-Token': sessionStorage.getItem('token'),\n            'Authorization': `Session ${sessionStorage.getItem('token')}`,\n            'X-CSRFToken': getCsrf()\n          },\n          body: JSON.stringify({\n            element_ids: selectedElements\n          }),\n          credentials: 'include'\n        });\n      } catch (Exception) {\n        console.log(\"Error deleting items: \", Exception);\n      } finally {\n        setSelectedElements([]);\n        await fetchItems(selectedTab);\n      }\n    }\n  }\n  const handleEdit = async data => {\n    // close on both edit and cancel\n    setShowEditModal(false);\n    if (data === null) return;\n    const endpoint = selectedTab.toLowerCase();\n    try {\n      // convert field names to snake_case before sending to API\n      const payload = convertKeysToSnake(data);\n      await fetch(`http://localhost:8000/api/${endpoint}/edit/?${endpoint.slice(0, -1)}_id=${elementToEdit.id}`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n          'Session-Token': sessionStorage.getItem('token'),\n          'Authorization': `Session ${sessionStorage.getItem('token')}`,\n          'X-CSRFToken': getCsrf()\n        },\n        body: JSON.stringify(payload),\n        credentials: 'include'\n      }).then(response => {\n        if (!response.ok) {\n          console.log(\"Failed to edit item\");\n        }\n        return response.json();\n      }).then(data => {\n        console.log(data);\n      });\n    } catch (Exception) {} finally {\n      setSelectedElements([]);\n      setElementToEdit(null);\n      fetchItems(selectedTab);\n    }\n  };\n  const handleCreate = async data => {\n    // close on both create and cancel\n    setOpenCreateModal(false);\n\n    // cancel action (CreateNewElement calls onCreate(null) on cancel)\n    console.log('handleCreate received data:', data);\n    if (data === null) return;\n    const endpoint = selectedTab.toLowerCase();\n    try {\n      // ensure we have an object to convert\n      const safeData = data || {};\n      // convert field names to snake_case before sending to API\n      const payload = convertKeysToSnake(safeData);\n      console.log('Creating', endpoint, 'payload:', payload);\n      await fetch(\"http://localhost:8000/api/\" + endpoint + \"/create-new/\", {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Session-Token': sessionStorage.getItem('token'),\n          'Authorization': `Session ${sessionStorage.getItem('token')}`,\n          'X-CSRFToken': getCsrf()\n        },\n        body: JSON.stringify(payload),\n        credentials: 'include'\n      }).then(response => {\n        if (!response.ok) {\n          throw new Error(\"Failed to create item\");\n        }\n        return response.json();\n      }).then(data => {\n        console.log(data);\n      });\n      await fetchItems(selectedTab);\n    } catch (error) {\n      console.error(\"Error creating item: \", error);\n    }\n  };\n  useEffect(() => {\n    setFilter(\"\");\n    const storedUsername = username || sessionStorage.getItem('username');\n    if (storedUsername) {\n      setUsername(storedUsername);\n    }\n    fetchItems(selectedTab);\n    const loader = setTimeout(() => {\n      setLoading(false);\n    }, 800);\n    return () => {\n      clearTimeout(loader);\n    };\n  }, [username, selectedTab, setUsername]);\n\n  // for account modal\n  useEffect(() => {\n    function handleClickOutside(e) {\n      if (accountModalRef.current && !accountModalRef.current.contains(e.target)) {\n        setOpenAccountModal(false);\n      }\n    }\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => document.removeEventListener('mousedown', handleClickOutside);\n  });\n  const handleTabSelect = tab => {\n    setElements([]);\n    setSelectedElements([]);\n    setSelectedTab(tab);\n    setSearchQuery(\"\");\n\n    // fetch new items for the selected tab\n    console.log(\"Switching to tab:\", tab);\n    fetchItems(tab);\n  };\n\n  // fetch customer names to use as options for Payments.payer select\n  const fetchCustomerOptions = async () => {\n    try {\n      const res = await fetch('http://localhost:8000/api/customers/list-all/', {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n          'Session-Token': sessionStorage.getItem('token'),\n          'Authorization': `Session ${sessionStorage.getItem('token')}`\n        },\n        credentials: 'include'\n      });\n      if (!res.ok) throw new Error('Failed to fetch customers');\n      const data = await res.json();\n\n      // normalize keys (reuse normalizeKey logic)\n      const normalizeKey = s => s.replace(/_([a-z])/g, (_, c) => c.toUpperCase());\n      const normalizeObject = obj => {\n        if (obj === null || obj === undefined) return obj;\n        if (Array.isArray(obj)) return obj.map(normalizeObject);\n        if (typeof obj !== 'object') return obj;\n        const res = {};\n        Object.keys(obj).forEach(k => {\n          const newKey = normalizeKey(k);\n          res[newKey] = normalizeObject(obj[k]);\n        });\n        setTableLoading(false);\n        return res;\n      };\n      const normalized = Array.isArray(data) ? data.map(normalizeObject) : [];\n      const opts = normalized.map(c => ({\n        value: c.name,\n        label: c.name || c.fullName || `#${String(c.id).padStart(3, '0')}`\n      }));\n      setCustomerOptions(opts);\n    } catch (err) {\n      console.error('Error fetching customer options', err);\n      setCustomerOptions([]);\n    }\n  };\n  const fetchNicheOptions = async () => {\n    try {\n      const res = await fetch('http://localhost:8000/api/niches/list-all/', {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n          'Session-Token': sessionStorage.getItem('token'),\n          'Authorization': `Session ${sessionStorage.getItem('token')}`\n        },\n        credentials: 'include'\n      });\n      if (!res.ok) throw new Error('Failed to fetch niches');\n      const data = await res.json();\n\n      // normalize keys (reuse normalizeKey logic)\n      const normalizeKey = s => s.replace(/_([a-z])/g, (_, c) => c.toUpperCase());\n      const normalizeObject = obj => {\n        if (obj === null || obj === undefined) return obj;\n        if (Array.isArray(obj)) return obj.map(normalizeObject);\n        if (typeof obj !== 'object') return obj;\n        const res = {};\n        Object.keys(obj).forEach(k => {\n          const newKey = normalizeKey(k);\n          res[newKey] = normalizeObject(obj[k]);\n        });\n        res = res.filter(entry => entry.status !== 'Available');\n        setTableLoading(false);\n        return res;\n      };\n      const normalized = Array.isArray(data) ? data.map(normalizeObject) : [];\n      const opts = normalized.map(n => {\n        var _n$location;\n        return {\n          value: n.id,\n          label: `${(_n$location = n.location) !== null && _n$location !== void 0 ? _n$location : 'No location'} - #${String(n.id).padStart(3, '0')}` || `#${String(n.id).padStart(3, '0')}`\n        };\n      });\n      setNicheOptions(opts);\n    } catch (err) {\n      console.error('Error fetching niche options', err);\n      setNicheOptions([]);\n    }\n  };\n  const handleSelectRow = id => {\n    console.log(id);\n    setSelectedElements(prev => prev.includes(id) ? prev.filter(ppid => ppid !== id) : [...prev, id]);\n  };\n  const handleSelectAll = checked => {\n    if (checked) setSelectedElements(elements.map(p => p.id));else setSelectedElements([]);\n  };\n  if (loading) return /*#__PURE__*/_jsxDEV(LoadingPage, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 379,\n    columnNumber: 25\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen screen overflow-auto items-center flex flex-col bg-[#fbfbfb]\",\n    children: [/*#__PURE__*/_jsxDEV(\"title\", {\n      children: \"Dashboard\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 383,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-w-[90%] min-h-[80%] max-w-[100%] max-h-[100%]\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"header bg-white w-full self-center flex flex-row justify-between mt-3 rounded-lg p-4 drop-shadow-md\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-row items-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: e => {\n              setSidebarOpen(!sidebarOpen);\n            },\n            className: \"p-2 text-[22px] rounded-full hover:bg-black/10 text-zinc-700 mr-4\",\n            children: /*#__PURE__*/_jsxDEV(Icon, {\n              icon: \"fa-solid fa-bars\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 387,\n              columnNumber: 159\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 387,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"text-3xl font-bold text-zinc-700\",\n            children: \"Columbarium Dashboard\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 388,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 386,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"accountControl\",\n          className: \"flex flex-row items-center\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setOpenAccountModal(!openAccountModal),\n            className: \"p-2 hover:underline text-md text-zinc-700 mr-4\",\n            children: [/*#__PURE__*/_jsxDEV(Icon, {\n              icon: \"fa-solid fa-user\",\n              className: \"mr-3\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 391,\n              columnNumber: 147\n            }, this), username !== \"\" ? username : \"User Not Found\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 391,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 390,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 385,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"lg:w-[100%] md:w-[90%] h-[85%] flex flex-row gap-3\",\n        children: [sidebarOpen && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"sidebar bg-white w-[20%] h-full self-start flex flex-col mt-3 rounded-lg p-4 drop-shadow-md gap-1\",\n          children: [/*#__PURE__*/_jsxDEV(Tab, {\n            onClick: () => handleTabSelect(\"Customers\"),\n            icon: \"fa-solid fa-users\",\n            children: \"Customers\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 401,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Tab, {\n            onClick: () => handleTabSelect(\"Payments\"),\n            icon: \"fa-solid fa-credit-card\",\n            children: \"Payments\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 403,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Tab, {\n            onClick: () => handleTabSelect(\"Accounts\"),\n            icon: \"fa-solid fa-wallet\",\n            children: \"Accounts\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 405,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Tab, {\n            onClick: () => handleTabSelect(\"Contacts\"),\n            icon: \"fa-solid fa-address-book\",\n            children: \"Contacts\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 407,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Tab, {\n            onClick: () => handleTabSelect(\"Occupants\"),\n            icon: \"fa-solid fa-box-open\",\n            children: \"Occupants\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 409,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Tab, {\n            onClick: () => handleTabSelect(\"Niches\"),\n            icon: \"fa-solid fa-square-person-confined\",\n            children: \"Niches\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 411,\n            columnNumber: 25\n          }, this), sessionStorage.getItem(\"permissions\").split(\",\").includes(\"view_audit\") && /*#__PURE__*/_jsxDEV(Tab, {\n            onClick: () => handleTabSelect(\"Audit\"),\n            icon: \"fa-solid fa-users\",\n            children: \"Audit Logs\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 414,\n            columnNumber: 101\n          }, this), sessionStorage.getItem(\"permissions\").split(\",\").includes(\"manage_users\") && /*#__PURE__*/_jsxDEV(Tab, {\n            onClick: () => handleTabSelect(\"Users\"),\n            icon: \"fa-solid fa-user-shield\",\n            children: \"User Management\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 418,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Tab, {\n            onClick: () => handleTabSelect(\"Analytics\"),\n            icon: \"fa-solid fa-chart-simple\",\n            children: \"Analytics\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 421,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 398,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"content transition-all duration-300 ease-out bg-white w-full h-full flex flex-col mt-3 rounded-lg p-4 drop-shadow-md overflow-auto\",\n          children: (() => {\n            const tabs = {\n              Customers: {\n                columns: [{\n                  label: \"\",\n                  key: \"_select\"\n                }, {\n                  label: \"Customer ID\",\n                  key: \"id\",\n                  type: 'number'\n                }, {\n                  label: \"Full Name\",\n                  key: \"name\",\n                  type: 'text'\n                }, {\n                  label: \"Contact Number\",\n                  key: \"contactNumber\",\n                  type: 'text'\n                }, {\n                  label: \"Email\",\n                  key: \"email\",\n                  type: 'text'\n                }, {\n                  label: \"Address\",\n                  key: \"address\",\n                  type: 'text'\n                }, {\n                  label: \"Deceased's Name\",\n                  key: \"deceasedName\",\n                  type: 'text'\n                }, {\n                  label: \"Date Deceased\",\n                  key: \"deceasedDate\",\n                  type: 'date'\n                }, {\n                  label: \"Relationship to Deceased\",\n                  key: \"relationshipToDeceased\",\n                  type: 'text'\n                }],\n                toolbarButtons: [{\n                  label: 'Add Customer',\n                  icon: 'fa-solid fa-plus',\n                  bg: 'bg-blue-500',\n                  textClass: 'text-white',\n                  onClick: () => setOpenCreateModal(true)\n                }, {\n                  label: 'Edit Selected',\n                  icon: 'fa-solid fa-pencil',\n                  onClick: e => {\n                    handleEditClick(e);\n                  }\n                }, {\n                  label: `(${selectedElements.length}) Remove Selected`,\n                  icon: 'fa fa-trash',\n                  bg: 'bg-red-500',\n                  textClass: 'text-white',\n                  onClick: e => {\n                    handleRemoveSelected(e);\n                  }\n                }],\n                rowRenderer: row => {\n                  var _row$id, _row$name, _row$contactNumber, _row$email, _row$address, _row$deceasedName, _row$deceasedDate, _row$relationshipToDe;\n                  return /*#__PURE__*/_jsxDEV(_Fragment, {\n                    children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"p-2\",\n                      children: [\"#\", ((_row$id = row.id) !== null && _row$id !== void 0 ? _row$id : '').toString().padStart(3, \"0\")]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 450,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"p-2\",\n                      children: (_row$name = row.name) !== null && _row$name !== void 0 ? _row$name : ''\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 451,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"p-2\",\n                      children: (_row$contactNumber = row.contactNumber) !== null && _row$contactNumber !== void 0 ? _row$contactNumber : ''\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 452,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"p-2\",\n                      children: (_row$email = row.email) !== null && _row$email !== void 0 ? _row$email : ''\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 453,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"p-2\",\n                      children: (_row$address = row.address) !== null && _row$address !== void 0 ? _row$address : ''\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 454,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"p-2\",\n                      children: (_row$deceasedName = row.deceasedName) !== null && _row$deceasedName !== void 0 ? _row$deceasedName : ''\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 455,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"p-2\",\n                      children: (_row$deceasedDate = row.deceasedDate) !== null && _row$deceasedDate !== void 0 ? _row$deceasedDate : ''\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 456,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"p-2\",\n                      children: (_row$relationshipToDe = row.relationshipToDeceased) !== null && _row$relationshipToDe !== void 0 ? _row$relationshipToDe : ''\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 457,\n                      columnNumber: 45\n                    }, this)]\n                  }, void 0, true);\n                }\n              },\n              Payments: {\n                columns: [{\n                  label: \"\",\n                  key: \"_select\"\n                }, {\n                  label: \"Payment ID\",\n                  key: \"id\",\n                  type: 'number'\n                }, {\n                  label: \"Customer Name\",\n                  key: \"payer\",\n                  type: 'text'\n                }, {\n                  label: \"Amount Paid\",\n                  key: \"amountPaid\",\n                  type: 'number'\n                }, {\n                  label: \"Amount Due\",\n                  key: \"amountDue\",\n                  type: 'number'\n                }, {\n                  label: \"Remaining Balance\",\n                  key: \"remainingBalance\",\n                  type: 'number'\n                }, {\n                  label: \"Maintenance Fee\",\n                  key: \"maintenanceFee\",\n                  type: 'number'\n                }, {\n                  label: \"Date Paid\",\n                  key: \"paymentDate\",\n                  type: 'date'\n                }, {\n                  label: \"Status\",\n                  key: \"status\",\n                  type: 'text'\n                }],\n                toolbarButtons: [{\n                  label: 'Add Payment',\n                  icon: 'fa-solid fa-plus',\n                  bg: 'bg-blue-500',\n                  textClass: 'text-white',\n                  onClick: async () => {\n                    await fetchCustomerOptions();\n                    setOpenCreateModal(true);\n                  }\n                }, {\n                  label: 'Edit Selected',\n                  icon: 'fa-solid fa-pencil',\n                  onClick: e => {\n                    handleEditClick(e);\n                  }\n                }, {\n                  label: `(${selectedElements.length}) Remove Selected`,\n                  icon: 'fa fa-trash',\n                  bg: 'bg-red-500',\n                  textClass: 'text-white',\n                  onClick: e => {\n                    handleRemoveSelected(e);\n                  }\n                }],\n                rowRenderer: row => {\n                  var _row$id2, _ref3, _ref4, _row$amountPaid, _ref5, _row$amountDue, _ref6, _row$remainingBalance, _ref7, _row$maintenanceFee, _ref8, _row$status;\n                  return /*#__PURE__*/_jsxDEV(_Fragment, {\n                    children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"p-2\",\n                      children: [\"#\", ((_row$id2 = row.id) !== null && _row$id2 !== void 0 ? _row$id2 : '').toString().padStart(3, \"0\")]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 480,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"p-2\",\n                      children: function (_ref, _ref2, _row$payer) {\n                        // prefer 'payer' field; it may contain either the customer id or the name\n                        const payerVal = (_ref = (_ref2 = (_row$payer = row.payer) !== null && _row$payer !== void 0 ? _row$payer : row.payer_id) !== null && _ref2 !== void 0 ? _ref2 : row.payerId) !== null && _ref !== void 0 ? _ref : null;\n                        // if payerVal matches an option value, show the option label\n                        const opt = customerOptions.find(o => String(o.value) === String(payerVal));\n                        if (opt) return opt.label;\n                        // otherwise show the raw value (name) if present\n                        return payerVal !== null && payerVal !== void 0 ? payerVal : '';\n                      }()\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 481,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"p-2\",\n                      children: [\"\\u20B1 \", Number((_ref3 = (_ref4 = (_row$amountPaid = row.amountPaid) !== null && _row$amountPaid !== void 0 ? _row$amountPaid : row.amountPaid) !== null && _ref4 !== void 0 ? _ref4 : row.amount_paid) !== null && _ref3 !== void 0 ? _ref3 : 0).toLocaleString(\"en-US\", {\n                        minimumFractionDigits: 2\n                      })]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 490,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"p-2\",\n                      children: [\"\\u20B1 \", Number((_ref5 = (_row$amountDue = row.amountDue) !== null && _row$amountDue !== void 0 ? _row$amountDue : row.amount_due) !== null && _ref5 !== void 0 ? _ref5 : 0).toLocaleString(\"en-US\", {\n                        minimumFractionDigits: 2\n                      })]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 491,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"p-2\",\n                      children: [\"\\u20B1 \", Number((_ref6 = (_row$remainingBalance = row.remainingBalance) !== null && _row$remainingBalance !== void 0 ? _row$remainingBalance : row.remaining_balance) !== null && _ref6 !== void 0 ? _ref6 : 0).toLocaleString(\"en-US\", {\n                        minimumFractionDigits: 2\n                      })]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 492,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"p-2\",\n                      children: [\"\\u20B1 \", Number((_ref7 = (_row$maintenanceFee = row.maintenanceFee) !== null && _row$maintenanceFee !== void 0 ? _row$maintenanceFee : row.maintenance_fee) !== null && _ref7 !== void 0 ? _ref7 : 0).toLocaleString(\"en-US\", {\n                        minimumFractionDigits: 2\n                      })]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 493,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"p-2\",\n                      children: row.paymentDate ? new Intl.DateTimeFormat('en-US').format(new Date(row.paymentDate)) : ''\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 494,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"p-2\",\n                      children: /*#__PURE__*/_jsxDEV(StatusTag, {\n                        status: (_ref8 = (_row$status = row.status) !== null && _row$status !== void 0 ? _row$status : row.state) !== null && _ref8 !== void 0 ? _ref8 : ''\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 495,\n                        columnNumber: 45\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 495,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true);\n                }\n              },\n              Accounts: {\n                columns: [{\n                  label: \"\",\n                  key: \"_select\"\n                }, {\n                  label: \"Account ID\",\n                  key: \"id\",\n                  type: 'number'\n                }, {\n                  label: \"Customer Name\",\n                  key: \"customerName\",\n                  type: 'text'\n                }],\n                toolbarButtons: [],\n                rowRenderer: row => {\n                  var _row$id3, _row$customerName;\n                  /*#__PURE__*/_jsxDEV(_Fragment, {\n                    children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"p-2\",\n                      children: (_row$id3 = row.id) !== null && _row$id3 !== void 0 ? _row$id3 : ''\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 512,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"p-2\",\n                      children: (_row$customerName = row.customerName) !== null && _row$customerName !== void 0 ? _row$customerName : ''\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 513,\n                      columnNumber: 45\n                    }, this)]\n                  }, void 0, true);\n                }\n              },\n              Transactions: {\n                columns: [{\n                  label: \"\",\n                  key: \"_select\"\n                }, {\n                  label: \"Transaction #\",\n                  key: \"id\",\n                  type: 'number'\n                }, {\n                  label: \"Account\",\n                  key: \"account\",\n                  type: 'text'\n                }, {\n                  label: \"Date of Transaction\",\n                  key: \"date\",\n                  type: 'date'\n                }, {\n                  label: \"Type of Transaction\",\n                  key: \"type\",\n                  type: \"text\"\n                }, {\n                  label: \"Processed By\",\n                  key: \"processedBy\",\n                  type: \"text\"\n                }],\n                toolbarButtons: [{\n                  label: \"Add Transaction\",\n                  icon: \"fa-solid fa-plus\",\n                  onClick: setOpenCreateModal\n                }, {\n                  label: \"Edit Selected\",\n                  icon: \"fa-solid fa-pen-to-square\",\n                  onClick: handleEditClick\n                }, {\n                  label: \"Remove Selected\",\n                  icon: \"fa-solid fa-trash\",\n                  onClick: handleRemoveSelected\n                }],\n                rowRenderer: row => {\n                  var _row$account, _row$type, _row$processedBy;\n                  return /*#__PURE__*/_jsxDEV(_Fragment, {\n                    children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"p-2\",\n                      children: row.id ? row.id.padStart(3, \"0\") : ''\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 536,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"p-2\",\n                      children: (_row$account = row.account) !== null && _row$account !== void 0 ? _row$account : ''\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 537,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"p-2\",\n                      children: row.date ? new Intl.DateTimeFormat('en-US').format(new Date(row.date)) : ''\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 538,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"p-2\",\n                      children: (_row$type = row.type) !== null && _row$type !== void 0 ? _row$type : ''\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 539,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"p-2\",\n                      children: (_row$processedBy = row.processedBy) !== null && _row$processedBy !== void 0 ? _row$processedBy : ''\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 540,\n                      columnNumber: 45\n                    }, this)]\n                  }, void 0, true);\n                }\n              },\n              Contacts: {\n                columns: [{\n                  label: \"\",\n                  key: \"_select\"\n                }, {\n                  label: \"Contact ID\",\n                  key: \"id\",\n                  type: 'number'\n                }, {\n                  label: \"Family Name\",\n                  key: \"familyName\",\n                  type: 'text'\n                }, {\n                  label: \"Deceased's Name\",\n                  key: \"deceasedName\",\n                  type: 'text'\n                }, {\n                  label: \"Deceased Date\",\n                  key: \"deceasedDate\",\n                  type: 'date'\n                }, {\n                  label: \"Address\",\n                  key: \"address\",\n                  type: 'text'\n                }, {\n                  label: \"Contact Number\",\n                  key: \"contactNumber\",\n                  type: 'text'\n                }],\n                toolbarButtons: [{\n                  label: 'Add Contact',\n                  icon: 'fa-solid fa-plus',\n                  bg: 'bg-blue-500',\n                  textClass: 'text-white',\n                  onClick: () => setOpenCreateModal(true)\n                }, {\n                  label: 'Edit Selected',\n                  icon: 'fa-solid fa-pencil',\n                  onClick: e => {\n                    handleEditClick(e);\n                  }\n                }, {\n                  label: `(${selectedElements.length}) Remove Selected`,\n                  icon: 'fa fa-trash',\n                  textClass: 'text-white',\n                  bg: 'bg-red-500 text-white',\n                  onClick: handleRemoveSelected\n                }],\n                rowRenderer: row => {\n                  var _row$id4, _row$familyName, _row$deceasedName2, _row$address2, _row$contactNumber2, _row$status2;\n                  return /*#__PURE__*/_jsxDEV(_Fragment, {\n                    children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"p-2\",\n                      children: [\"#\", ((_row$id4 = row.id) !== null && _row$id4 !== void 0 ? _row$id4 : '').toString().padStart(3, \"0\")]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 564,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"p-2\",\n                      children: (_row$familyName = row.familyName) !== null && _row$familyName !== void 0 ? _row$familyName : ''\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 565,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"p-2\",\n                      children: (_row$deceasedName2 = row.deceasedName) !== null && _row$deceasedName2 !== void 0 ? _row$deceasedName2 : ''\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 566,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"p-2\",\n                      children: row.deceasedDate ? new Intl.DateTimeFormat('en-US').format(new Date(row.deceasedDate)) : ''\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 567,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"p-2\",\n                      children: (_row$address2 = row.address) !== null && _row$address2 !== void 0 ? _row$address2 : ''\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 568,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"p-2\",\n                      children: (_row$contactNumber2 = row.contactNumber) !== null && _row$contactNumber2 !== void 0 ? _row$contactNumber2 : ''\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 569,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"p-2\",\n                      children: /*#__PURE__*/_jsxDEV(StatusTag, {\n                        status: (_row$status2 = row.status) !== null && _row$status2 !== void 0 ? _row$status2 : ''\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 570,\n                        columnNumber: 65\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 570,\n                      columnNumber: 45\n                    }, this)]\n                  }, void 0, true);\n                }\n              },\n              Occupants: {\n                columns: [{\n                  label: \"\",\n                  key: \"_select\"\n                }, {\n                  label: \"Occupant ID\",\n                  key: \"id\",\n                  type: 'number'\n                }, {\n                  label: \"Name\",\n                  key: \"name\",\n                  type: 'text'\n                }, {\n                  label: \"Date of Interment\",\n                  key: \"intermentDate\",\n                  type: 'date'\n                }, {\n                  label: \"Niche\",\n                  key: \"niche\",\n                  type: 'text'\n                }],\n                toolbarButtons: [{\n                  label: 'Add Occupant',\n                  icon: 'fa-solid fa-plus',\n                  bg: 'bg-blue-500',\n                  textClass: 'text-white',\n                  onClick: async () => {\n                    await fetchNicheOptions();\n                    setOpenCreateModal(true);\n                  }\n                }, {\n                  label: 'Edit Selected',\n                  icon: 'fa-solid fa-pencil',\n                  onClick: e => {\n                    handleEditClick(e);\n                  }\n                }, {\n                  label: `(${selectedElements.length}) Remove Selected`,\n                  icon: 'fa fa-trash',\n                  bg: 'bg-red-500',\n                  textClass: 'text-white',\n                  onClick: handleRemoveSelected\n                }],\n                rowRenderer: row => {\n                  var _row$id5, _row$name2, _row$niche;\n                  return /*#__PURE__*/_jsxDEV(_Fragment, {\n                    children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"p-2\",\n                      children: [\"#\", ((_row$id5 = row.id) !== null && _row$id5 !== void 0 ? _row$id5 : '').toString().padStart(3, \"0\")]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 590,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"p-2\",\n                      children: (_row$name2 = row.name) !== null && _row$name2 !== void 0 ? _row$name2 : ''\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 591,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"p-2\",\n                      children: row.intermentDate ? new Intl.DateTimeFormat('en-US').format(new Date(row.intermentDate)) : ''\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 592,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"p-2\",\n                      children: (_row$niche = row.niche) !== null && _row$niche !== void 0 ? _row$niche : ''\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 593,\n                      columnNumber: 45\n                    }, this)]\n                  }, void 0, true);\n                }\n              },\n              Niches: {\n                columns: [{\n                  label: \"\",\n                  key: \"_select\"\n                }, {\n                  label: \"Niche ID\",\n                  key: \"id\",\n                  type: 'number'\n                }, {\n                  label: \"Amount\",\n                  key: \"amount\",\n                  type: 'number'\n                }, {\n                  label: \"Location\",\n                  key: \"location\",\n                  type: 'text'\n                }, {\n                  label: \"Status\",\n                  key: \"status\",\n                  type: 'text'\n                }],\n                toolbarButtons: [{\n                  label: 'Add Niche',\n                  icon: 'fa-solid fa-plus',\n                  bg: 'bg-blue-500',\n                  textClass: 'text-white',\n                  onClick: () => setOpenCreateModal(true)\n                }, {\n                  label: 'Edit Selected',\n                  icon: 'fa-solid fa-pencil',\n                  onClick: handleEditClick\n                }, {\n                  label: `(${selectedElements.length}) Remove Selected`,\n                  icon: 'fa fa-trash',\n                  bg: 'bg-red-500',\n                  textClass: 'text-white',\n                  onClick: handleRemoveSelected\n                }],\n                rowRenderer: row => {\n                  var _row$id6, _row$amount, _row$location, _row$status3;\n                  return /*#__PURE__*/_jsxDEV(_Fragment, {\n                    children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"p-2\",\n                      children: [\"#\", ((_row$id6 = row.id) !== null && _row$id6 !== void 0 ? _row$id6 : '').toString().padStart(3, \"0\")]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 612,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"p-2\",\n                      children: [\"\\u20B1 \", Number((_row$amount = row.amount) !== null && _row$amount !== void 0 ? _row$amount : 0).toLocaleString('en-US', {\n                        minimumFractionDigits: 2\n                      })]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 613,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"p-2\",\n                      children: (_row$location = row.location) !== null && _row$location !== void 0 ? _row$location : ''\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 614,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"p-2\",\n                      children: /*#__PURE__*/_jsxDEV(StatusTag, {\n                        status: (_row$status3 = row.status) !== null && _row$status3 !== void 0 ? _row$status3 : ''\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 615,\n                        columnNumber: 65\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 615,\n                      columnNumber: 45\n                    }, this)]\n                  }, void 0, true);\n                }\n              },\n              Audit: {\n                columns: [{\n                  label: \"User\",\n                  key: \"user\",\n                  type: 'text'\n                }, {\n                  label: \"Role\",\n                  key: \"role\",\n                  type: 'text'\n                }, {\n                  label: \"IP Address\",\n                  key: \"ipAddress\",\n                  type: 'text'\n                }, {\n                  label: \"Object ID\",\n                  key: \"objectId\",\n                  type: 'text'\n                }, {\n                  label: \"Action\",\n                  key: \"action\",\n                  type: 'text'\n                }, {\n                  label: \"Application\",\n                  key: \"app\",\n                  type: 'text'\n                }, {\n                  label: \"URL\",\n                  key: \"path\",\n                  type: 'text'\n                }, {\n                  label: \"Timestamp\",\n                  key: \"timestamp\",\n                  type: 'date'\n                }],\n                toolbarButtons: [],\n                rowRenderer: row => {\n                  var _row$user, _row$role, _row$ipAddress, _row$responseData$ids, _row$responseData, _row$responseData$ids2, _row$action, _row$app, _row$path;\n                  return /*#__PURE__*/_jsxDEV(_Fragment, {\n                    children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"p-2\",\n                      children: (_row$user = row.user) !== null && _row$user !== void 0 ? _row$user : ''\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 633,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"p-2\",\n                      children: (_row$role = row.role) !== null && _row$role !== void 0 ? _row$role : ''\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 634,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"p-2\",\n                      children: (_row$ipAddress = row.ipAddress) !== null && _row$ipAddress !== void 0 ? _row$ipAddress : ''\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 635,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"p-2\",\n                      children: (_row$responseData$ids = (_row$responseData = row.responseData) === null || _row$responseData === void 0 ? void 0 : (_row$responseData$ids2 = _row$responseData.ids) === null || _row$responseData$ids2 === void 0 ? void 0 : _row$responseData$ids2.join(', ')) !== null && _row$responseData$ids !== void 0 ? _row$responseData$ids : ''\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 636,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"p-2\",\n                      children: (_row$action = row.action) !== null && _row$action !== void 0 ? _row$action : ''\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 637,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"p-2\",\n                      children: (_row$app = row.app) !== null && _row$app !== void 0 ? _row$app : ''\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 638,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"p-2\",\n                      children: (_row$path = row.path) !== null && _row$path !== void 0 ? _row$path : ''\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 639,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"p-2\",\n                      children: row.timestamp ? new Intl.DateTimeFormat('en-US', {\n                        year: 'numeric',\n                        month: 'numeric',\n                        day: 'numeric',\n                        hour: 'numeric',\n                        minute: 'numeric',\n                        second: 'numeric'\n                      }).format(new Date(row.timestamp)) : ''\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 640,\n                      columnNumber: 45\n                    }, this)]\n                  }, void 0, true);\n                }\n              },\n              Users: {\n                columns: [{\n                  label: \"\",\n                  key: \"_select\"\n                }, {\n                  label: \"User ID\",\n                  key: \"id\",\n                  type: 'number'\n                }, {\n                  label: \"Username\",\n                  key: \"username\",\n                  type: 'text'\n                }, {\n                  label: \"Role\",\n                  key: \"role\",\n                  type: 'text'\n                }],\n                toolbarButtons: [{\n                  label: 'Add User',\n                  icon: 'fa-solid fa-plus',\n                  bg: 'bg-blue-500',\n                  textClass: 'text-white',\n                  onClick: () => setOpenCreateModal(true)\n                }, {\n                  label: 'Edit Selected',\n                  icon: 'fa-solid fa-pencil',\n                  onClick: handleEditClick\n                }, {\n                  label: `(${selectedElements.length}) Remove Selected`,\n                  icon: 'fa fa-trash',\n                  bg: 'bg-red-500',\n                  textClass: 'text-white',\n                  onClick: handleRemoveSelected\n                }],\n                rowRenderer: row => {\n                  var _row$id7, _row$username, _row$role2;\n                  return /*#__PURE__*/_jsxDEV(_Fragment, {\n                    children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"p-2\",\n                      children: (_row$id7 = row.id) !== null && _row$id7 !== void 0 ? _row$id7 : ''\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 659,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"p-2\",\n                      children: (_row$username = row.username) !== null && _row$username !== void 0 ? _row$username : ''\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 660,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"p-2\",\n                      children: (_row$role2 = row.role) !== null && _row$role2 !== void 0 ? _row$role2 : ''\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 661,\n                      columnNumber: 45\n                    }, this)]\n                  }, void 0, true);\n                }\n              }\n              // Add other tabs here\n            };\n            const cfg = tabs[selectedTab];\n            if (!cfg) return null;\n            if (tableLoading) return /*#__PURE__*/_jsxDEV(LoadingPage, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 671,\n              columnNumber: 54\n            }, this);\n            return /*#__PURE__*/_jsxDEV(TabContent, {\n              title: selectedTab,\n              searchQuery: searchQuery,\n              onSearchChange: setSearchQuery,\n              toolbarButtons: cfg.toolbarButtons,\n              columns: cfg.columns,\n              data: elements.length > 0 ? elements : [],\n              selectedItems: selectedElements,\n              onSelectAll: handleSelectAll,\n              onSelectRow: handleSelectRow,\n              getRowKey: row => row.id,\n              onFilterChange: value => setFilter(value),\n              children: cfg.rowRenderer\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 674,\n              columnNumber: 33\n            }, this);\n          })()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 426,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 395,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 384,\n      columnNumber: 13\n    }, this), openCreateModal && (() => {\n      let fieldsToPass = fieldsByTab[selectedTab];\n      if (selectedTab === 'Payments') {\n        // ensure options are available\n        const paymentsFields = (fieldsByTab.Payments || []).map(f => ({\n          ...f\n        }));\n        // replace payerId field with select options\n        const baseOpts = customerOptions.length ? customerOptions : [{\n          value: '',\n          label: 'No customers'\n        }];\n        const optsWithPrompt = [{\n          value: '',\n          label: 'Select Customer'\n        }, ...baseOpts];\n        fieldsToPass = paymentsFields.map(f => f.name === 'payer' ? {\n          ...f,\n          type: 'select',\n          options: optsWithPrompt\n        } : f);\n      } else if (selectedTab === 'Occupants') {\n        const occupantFields = (fieldsByTab.Occupants || []).map(f => ({\n          ...f\n        }));\n        const baseOpts = nicheOptions.length ? nicheOptions : [{\n          value: '',\n          label: 'No niches'\n        }];\n        const optsWithPrompt = [{\n          value: '',\n          label: 'Select Niche'\n        }, ...baseOpts];\n        fieldsToPass = occupantFields.map(f => f.name === 'nicheId' ? {\n          ...f,\n          type: 'select',\n          options: optsWithPrompt\n        } : f);\n      }\n      return /*#__PURE__*/_jsxDEV(CreateNewElement, {\n        tab: selectedTab,\n        onCreate: handleCreate,\n        fields: fieldsToPass\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 712,\n        columnNumber: 24\n      }, this);\n    })(), showEditModal && (() => {\n      let editFields = fieldsByTab[selectedTab];\n      if (selectedTab === 'Payments') {\n        const paymentsFields = (fieldsByTab.Payments || []).map(f => ({\n          ...f\n        }));\n        const baseEditOpts = customerOptions.length ? customerOptions : [{\n          value: '',\n          label: 'No customers'\n        }];\n        const editOptsWithPrompt = [{\n          value: '',\n          label: 'Select Customer'\n        }, ...baseEditOpts];\n        editFields = paymentsFields.map(f => f.name === 'payer' ? {\n          ...f,\n          type: 'select',\n          options: editOptsWithPrompt\n        } : f);\n      }\n      return /*#__PURE__*/_jsxDEV(EditElement, {\n        tab: selectedTab,\n        elementData: elementToEdit,\n        fields: editFields,\n        onEdit: handleEdit\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 723,\n        columnNumber: 24\n      }, this);\n    })(), /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: accountModalRef,\n      children: /*#__PURE__*/_jsxDEV(AccountModal, {\n        isOpen: openAccountModal,\n        username: username,\n        role: sessionStorage.getItem(\"role\") || 'Staff'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 727,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 726,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 382,\n    columnNumber: 9\n  }, this);\n}\n_s(DashboardPage, \"1LJy8wMnILWgCVRcg6Tl3Z/VjD8=\", false, function () {\n  return [useAuth];\n});\n_c = DashboardPage;\nvar _c;\n$RefreshReg$(_c, \"DashboardPage\");","map":{"version":3,"names":["Icon","useState","useEffect","useRef","useAuth","StatusTag","TabContent","LoadingPage","CreateNewElement","EditElement","AccountModal","fieldsByTab","Tab","jsxDEV","_jsxDEV","Fragment","_Fragment","getCsrf","cookies","document","cookie","split","i","length","trim","startsWith","substring","DashboardPage","_s","loading","setLoading","username","setUsername","selectedTab","setSelectedTab","sidebarOpen","setSidebarOpen","searchQuery","setSearchQuery","openCreateModal","setOpenCreateModal","showEditModal","setShowEditModal","tableLoading","setTableLoading","selectedElements","setSelectedElements","elementToEdit","setElementToEdit","elements","setElements","openAccountModal","setOpenAccountModal","accountModalRef","filter","setFilter","customerOptions","setCustomerOptions","nicheOptions","setNicheOptions","fetchItems","endpoint","console","log","fetch","toLowerCase","method","headers","sessionStorage","getItem","credentials","then","response","ok","Error","json","data","normalizeKey","s","replace","_","c","toUpperCase","normalizeObject","obj","undefined","Array","isArray","map","res","Object","keys","forEach","k","newKey","val","normalized","Exception","camelToSnake","m","convertKeysToSnake","Date","toISOString","handleEditClick","prepareAndShow","fetchCustomerOptions","find","e","id","handleRemoveSelected","preventDefault","confirmation","window","confirm","body","JSON","stringify","element_ids","handleEdit","payload","slice","handleCreate","safeData","error","storedUsername","loader","setTimeout","clearTimeout","handleClickOutside","current","contains","target","addEventListener","removeEventListener","handleTabSelect","tab","opts","value","name","label","fullName","String","padStart","err","fetchNicheOptions","entry","status","n","_n$location","location","handleSelectRow","prev","includes","ppid","handleSelectAll","checked","p","fileName","_jsxFileName","lineNumber","columnNumber","className","children","onClick","icon","tabs","Customers","columns","key","type","toolbarButtons","bg","textClass","rowRenderer","row","_row$id","_row$name","_row$contactNumber","_row$email","_row$address","_row$deceasedName","_row$deceasedDate","_row$relationshipToDe","toString","contactNumber","email","address","deceasedName","deceasedDate","relationshipToDeceased","Payments","_row$id2","_ref3","_ref4","_row$amountPaid","_ref5","_row$amountDue","_ref6","_row$remainingBalance","_ref7","_row$maintenanceFee","_ref8","_row$status","_ref","_ref2","_row$payer","payerVal","payer","payer_id","payerId","opt","o","Number","amountPaid","amount_paid","toLocaleString","minimumFractionDigits","amountDue","amount_due","remainingBalance","remaining_balance","maintenanceFee","maintenance_fee","paymentDate","Intl","DateTimeFormat","format","state","Accounts","_row$id3","_row$customerName","customerName","Transactions","_row$account","_row$type","_row$processedBy","account","date","processedBy","Contacts","_row$id4","_row$familyName","_row$deceasedName2","_row$address2","_row$contactNumber2","_row$status2","familyName","Occupants","_row$id5","_row$name2","_row$niche","intermentDate","niche","Niches","_row$id6","_row$amount","_row$location","_row$status3","amount","Audit","_row$user","_row$role","_row$ipAddress","_row$responseData$ids","_row$responseData","_row$responseData$ids2","_row$action","_row$app","_row$path","user","role","ipAddress","responseData","ids","join","action","app","path","timestamp","year","month","day","hour","minute","second","Users","_row$id7","_row$username","_row$role2","cfg","title","onSearchChange","selectedItems","onSelectAll","onSelectRow","getRowKey","onFilterChange","fieldsToPass","paymentsFields","f","baseOpts","optsWithPrompt","options","occupantFields","onCreate","fields","editFields","baseEditOpts","editOptsWithPrompt","elementData","onEdit","ref","isOpen","_c","$RefreshReg$"],"sources":["C:/Users/LenovO/Documents/OtherProjects/ColumbariumManagementSystem/frontend/src/pages/dashboard.js"],"sourcesContent":["import Icon from \"../components/icon\";\r\n\r\nimport { useState, useEffect, useRef } from \"react\";\r\nimport { useAuth } from \"../contexts/AuthContext\";\r\nimport StatusTag from '../components/dashboard/statusTag';\r\nimport TabContent from '../components/dashboard/tabContent';\r\n\r\nimport LoadingPage from './loading';\r\nimport CreateNewElement from \"../components/dashboard/createNewElement\";\r\nimport EditElement from \"../components/dashboard/editElement\";\r\nimport AccountModal from \"../components/dashboard/accountModal\";\r\n\r\nimport { fieldsByTab } from \"../config/dashboard/fieldsByTab\";\r\n\r\nimport Tab from '../components/dashboard/tab';\r\n\r\nfunction getCsrf() {\r\n    const cookies = document.cookie.split(';');\r\n    for (let i = 0; i < cookies.length; i++) {\r\n        const cookie = cookies[i].trim();\r\n        if (cookie.startsWith('csrftoken=')) {\r\n            return cookie.substring('csrftoken='.length, cookie.length);\r\n        }\r\n    }\r\n}\r\n\r\nexport default function DashboardPage() {\r\n    const [loading, setLoading] = useState(true);\r\n    const { username, setUsername } = useAuth();\r\n    const [selectedTab, setSelectedTab] = useState(\"Customers\");\r\n    const [sidebarOpen, setSidebarOpen] = useState(true);\r\n    const [searchQuery, setSearchQuery] = useState(\"\");\r\n    const [openCreateModal, setOpenCreateModal] = useState(false);\r\n    const [showEditModal, setShowEditModal] = useState(false);\r\n\r\n    const [tableLoading, setTableLoading] = useState(false);\r\n\r\n    const [selectedElements, setSelectedElements] = useState([]);\r\n    const [elementToEdit, setElementToEdit] = useState(null);\r\n    const [elements, setElements] = useState([])\r\n\r\n    const [openAccountModal, setOpenAccountModal] = useState(false);\r\n    const accountModalRef = useRef(null);\r\n    const [filter, setFilter] = useState(\"\");\r\n    const [customerOptions, setCustomerOptions] = useState([]);\r\n    const [nicheOptions, setNicheOptions] = useState([]);\r\n    \r\n    async function fetchItems(endpoint) {\r\n        setTableLoading(true);\r\n        setElements([]);\r\n        console.log(endpoint, \" fetching items.\");\r\n        try {\r\n            await fetch (`http://localhost:8000/api/${endpoint.toLowerCase()}/list-all/`, {\r\n                method: 'GET',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    'Session-Token': sessionStorage.getItem('token'),\r\n                    'Authorization': `Session ${sessionStorage.getItem('token')}`\r\n                },\r\n                credentials: 'include',\r\n            }).then(response => {\r\n                if (!response.ok) {\r\n                    throw new Error(\"Failed to fetch items\");\r\n                } else {\r\n                    return response.json();\r\n                }\r\n            }).then(data => {\r\n                const normalizeKey = (s) => s.replace(/_([a-z])/g, (_, c) => c.toUpperCase());\r\n\r\n                const normalizeObject = (obj) => {\r\n                    if (obj === null || obj === undefined) return obj;\r\n                    if (Array.isArray(obj)) return obj.map(normalizeObject);\r\n                    if (typeof obj !== 'object') return obj;\r\n                    const res = {};\r\n                    Object.keys(obj).forEach(k => {\r\n                        const newKey = normalizeKey(k);\r\n                        const val = obj[k];\r\n                        res[newKey] = normalizeObject(val);\r\n                    });\r\n                    \r\n                    return res;\r\n                }\r\n\r\n                setTableLoading(false);\r\n\r\n                const normalized = Array.isArray(data) ? data.map(normalizeObject) : data;\r\n                setElements(normalized);\r\n                console.log(\"Fetched items (normalized): \", normalized);\r\n            })\r\n        } catch (Exception) {\r\n            console.log(\"Error fetching items: \", Exception);\r\n        }\r\n    }\r\n\r\n    // convert camelCase keys used in the UI back to snake_case for the API\r\n    const camelToSnake = (s) => s.replace(/([A-Z])/g, (m) => '_' + m.toLowerCase());\r\n\r\n    const convertKeysToSnake = (obj) => {\r\n        if (obj === null || obj === undefined) return obj;\r\n        if (Array.isArray(obj)) return obj.map(convertKeysToSnake);\r\n        if (obj instanceof Date) return obj.toISOString();\r\n        if (typeof obj !== 'object') return obj;\r\n\r\n        const res = {};\r\n        Object.keys(obj).forEach((k) => {\r\n            const newKey = camelToSnake(k);\r\n            res[newKey] = convertKeysToSnake(obj[k]);\r\n        });\r\n        return res;\r\n    }\r\n\r\n    const handleEditClick = () => {\r\n         if (selectedElements.length === 1) {\r\n            // ensure customer options are loaded when editing Payments\r\n            const prepareAndShow = async () => {\r\n                if (selectedTab === 'Payments') await fetchCustomerOptions();\r\n                setElementToEdit(elements.find(e => e.id === selectedElements[0]));\r\n                setShowEditModal(true);\r\n            }\r\n            prepareAndShow();\r\n         }\r\n        }\r\n    \r\n\r\n    async function handleRemoveSelected(e) {\r\n        e.preventDefault();\r\n\r\n        if (selectedElements.length === 0) return;\r\n\r\n        const endpoint = selectedTab.toLowerCase();\r\n\r\n        const confirmation = window.confirm(`Are you sure you want to delete ${selectedElements.length} items? This action cannot be undone.`);\r\n\r\n        if (confirmation) {\r\n            try {\r\n                await fetch(`http://localhost:8000/api/${endpoint}/delete/`, {\r\n                    method: 'DELETE',\r\n                    headers: {\r\n                        'Content-Type': 'application/json',\r\n                        'Session-Token': sessionStorage.getItem('token'),\r\n                        'Authorization': `Session ${sessionStorage.getItem('token')}`,\r\n                        'X-CSRFToken': getCsrf(),\r\n                    },\r\n                    body: JSON.stringify({ element_ids: selectedElements }),\r\n                    credentials: 'include',\r\n                })\r\n            } catch (Exception) {\r\n                console.log(\"Error deleting items: \", Exception);\r\n            } finally {\r\n                setSelectedElements([]);\r\n\r\n                await fetchItems(selectedTab);\r\n            }\r\n        }\r\n    }\r\n\r\n    const handleEdit = async(data) => {\r\n        // close on both edit and cancel\r\n        setShowEditModal(false);\r\n        if (data === null) return;\r\n\r\n        const endpoint = selectedTab.toLowerCase();\r\n\r\n        try {\r\n            // convert field names to snake_case before sending to API\r\n            const payload = convertKeysToSnake(data);\r\n\r\n            await fetch(`http://localhost:8000/api/${endpoint}/edit/?${endpoint.slice(0, -1)}_id=${elementToEdit.id}`, {\r\n                method: 'PUT',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    'Session-Token': sessionStorage.getItem('token'),\r\n                    'Authorization': `Session ${sessionStorage.getItem('token')}`,\r\n                    'X-CSRFToken': getCsrf(),\r\n                },\r\n                body: JSON.stringify(payload),\r\n                credentials: 'include',\r\n            }).then(response => {\r\n                if (!response.ok) {\r\n                    console.log(\"Failed to edit item\")\r\n                }\r\n\r\n                return response.json();\r\n            }).then(data => {\r\n                console.log(data);\r\n            })\r\n        } catch (Exception) {\r\n\r\n        } finally {\r\n            setSelectedElements([]);\r\n            setElementToEdit(null);\r\n            fetchItems(selectedTab);\r\n        }\r\n    }\r\n\r\n    const handleCreate = async (data) => {\r\n        // close on both create and cancel\r\n        setOpenCreateModal(false);\r\n\r\n        // cancel action (CreateNewElement calls onCreate(null) on cancel)\r\n        console.log('handleCreate received data:', data);\r\n        if (data === null) return;\r\n        const endpoint = selectedTab.toLowerCase();\r\n        try {\r\n            // ensure we have an object to convert\r\n            const safeData = data || {};\r\n            // convert field names to snake_case before sending to API\r\n            const payload = convertKeysToSnake(safeData);\r\n\r\n            console.log('Creating', endpoint, 'payload:', payload);\r\n\r\n            await fetch(\"http://localhost:8000/api/\" + endpoint + \"/create-new/\", {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    'Session-Token': sessionStorage.getItem('token'),\r\n                    'Authorization': `Session ${sessionStorage.getItem('token')}`,\r\n                    'X-CSRFToken': getCsrf(),\r\n                },\r\n                body: JSON.stringify(payload),\r\n                credentials: 'include',\r\n            }).then(response => {\r\n                if (!response.ok) {\r\n                    throw new Error(\"Failed to create item\");\r\n                }\r\n\r\n                return response.json();\r\n            }).then(data => {\r\n                console.log(data);\r\n            })\r\n\r\n            await fetchItems(selectedTab);\r\n        } catch (error) {\r\n            console.error(\"Error creating item: \", error);\r\n        }\r\n        \r\n    }\r\n\r\n    useEffect(() => {\r\n        setFilter(\"\");\r\n       const storedUsername = username || sessionStorage.getItem('username');\r\n       if (storedUsername) {\r\n           setUsername(storedUsername);\r\n       }\r\n\r\n       fetchItems(selectedTab);\r\n\r\n       const loader = setTimeout(() => {\r\n           setLoading(false);\r\n       }, 800);\r\n\r\n       return () => {\r\n           clearTimeout(loader);\r\n                \r\n       }\r\n    }, [username, selectedTab, setUsername])\r\n\r\n    // for account modal\r\n    useEffect(() => {\r\n        \r\n        function handleClickOutside(e) {\r\n           if (accountModalRef.current &&\r\n               !accountModalRef.current.contains(e.target)\r\n           ) {\r\n               setOpenAccountModal(false);\r\n           }\r\n        }\r\n\r\n        document.addEventListener('mousedown', handleClickOutside);\r\n\r\n        return () => document.removeEventListener('mousedown', handleClickOutside);\r\n    })\r\n\r\n    const handleTabSelect = (tab) => {\r\n        setElements([])\r\n        setSelectedElements([]);\r\n        setSelectedTab(tab);\r\n        setSearchQuery(\"\");\r\n\r\n        // fetch new items for the selected tab\r\n        console.log(\"Switching to tab:\", tab)\r\n        fetchItems(tab);\r\n    }\r\n\r\n    // fetch customer names to use as options for Payments.payer select\r\n    const fetchCustomerOptions = async () => {\r\n        try {\r\n            const res = await fetch('http://localhost:8000/api/customers/list-all/', {\r\n                method: 'GET',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    'Session-Token': sessionStorage.getItem('token'),\r\n                    'Authorization': `Session ${sessionStorage.getItem('token')}`\r\n                },\r\n                credentials: 'include',\r\n            });\r\n            if (!res.ok) throw new Error('Failed to fetch customers');\r\n            const data = await res.json();\r\n\r\n            // normalize keys (reuse normalizeKey logic)\r\n            const normalizeKey = (s) => s.replace(/_([a-z])/g, (_, c) => c.toUpperCase());\r\n            const normalizeObject = (obj) => {\r\n                if (obj === null || obj === undefined) return obj;\r\n                if (Array.isArray(obj)) return obj.map(normalizeObject);\r\n                if (typeof obj !== 'object') return obj;\r\n                const res = {};\r\n                Object.keys(obj).forEach(k => {\r\n                    const newKey = normalizeKey(k);\r\n                    res[newKey] = normalizeObject(obj[k]);\r\n                });\r\n\r\n                setTableLoading(false);\r\n                return res;\r\n            }\r\n\r\n            const normalized = Array.isArray(data) ? data.map(normalizeObject) : [];\r\n                    const opts = normalized.map(c => ({ value: c.name, label: c.name || c.fullName || (`#${String(c.id).padStart(3, '0')}`) }));\r\n            setCustomerOptions(opts);\r\n        } catch (err) {\r\n            console.error('Error fetching customer options', err);\r\n            setCustomerOptions([]);\r\n        }\r\n    }\r\n\r\n    const fetchNicheOptions = async () => {\r\n        try {\r\n            const res = await fetch('http://localhost:8000/api/niches/list-all/', {\r\n                method: 'GET',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    'Session-Token': sessionStorage.getItem('token'),\r\n                    'Authorization': `Session ${sessionStorage.getItem('token')}`\r\n                },\r\n                credentials: 'include',\r\n            });\r\n            if (!res.ok) throw new Error('Failed to fetch niches');\r\n            const data = await res.json();\r\n\r\n            // normalize keys (reuse normalizeKey logic)\r\n            const normalizeKey = (s) => s.replace(/_([a-z])/g, (_, c) => c.toUpperCase());\r\n            const normalizeObject = (obj) => {\r\n                if (obj === null || obj === undefined) return obj;\r\n                if (Array.isArray(obj)) return obj.map(normalizeObject);\r\n                if (typeof obj !== 'object') return obj;\r\n                const res = {};\r\n                Object.keys(obj).forEach(k => {\r\n                    const newKey = normalizeKey(k);\r\n                    res[newKey] = normalizeObject(obj[k]);\r\n                });\r\n                \r\n                res = res.filter(entry => entry.status !== 'Available');\r\n                setTableLoading(false);\r\n                return res;\r\n            }\r\n            const normalized = Array.isArray(data) ? data.map(normalizeObject) : [];\r\n            const opts = normalized.map(n => ({ value: n.id, label: (`${n.location ?? 'No location'} - #${String(n.id).padStart(3, '0')}`) || (`#${String(n.id).padStart(3, '0')}`) }));\r\n            setNicheOptions(opts);\r\n        } catch (err) {\r\n            console.error('Error fetching niche options', err);\r\n            setNicheOptions([]);\r\n        }\r\n    }\r\n\r\n    \r\n    \r\n\r\n    const handleSelectRow = (id) => {\r\n        console.log(id);\r\n        setSelectedElements((prev) => \r\n            prev.includes(id) ? prev.filter((ppid) => ppid !== id) : [...prev, id]\r\n        )\r\n    }\r\n    \r\n    const handleSelectAll = (checked) => {\r\n        if (checked) setSelectedElements(elements.map((p) => p.id));\r\n        else setSelectedElements([]);\r\n    }\r\n\r\n    if (loading) return <LoadingPage />;    \r\n\r\n    return (\r\n        <div className=\"min-h-screen screen overflow-auto items-center flex flex-col bg-[#fbfbfb]\">\r\n            <title>Dashboard</title>\r\n            <div className=\"min-w-[90%] min-h-[80%] max-w-[100%] max-h-[100%]\">\r\n                <div className=\"header bg-white w-full self-center flex flex-row justify-between mt-3 rounded-lg p-4 drop-shadow-md\">\r\n                    <div className=\"flex flex-row items-center\">\r\n                        <button onClick={(e) => {setSidebarOpen(!sidebarOpen)}} className=\"p-2 text-[22px] rounded-full hover:bg-black/10 text-zinc-700 mr-4\"><Icon icon=\"fa-solid fa-bars\"></Icon></button>\r\n                        <h1 className=\"text-3xl font-bold text-zinc-700\">Columbarium Dashboard</h1>\r\n                    </div>\r\n                    <div id=\"accountControl\" className=\"flex flex-row items-center\">\r\n                        <button onClick={() => setOpenAccountModal(!openAccountModal)} className=\"p-2 hover:underline text-md text-zinc-700 mr-4\"><Icon icon=\"fa-solid fa-user\" className=\"mr-3\"></Icon>{username !== \"\" ? username : \"User Not Found\"}</button>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"lg:w-[100%] md:w-[90%] h-[85%] flex flex-row gap-3\">\r\n                    {/* Sidebar */}\r\n                    { sidebarOpen &&\r\n                    <div className=\"sidebar bg-white w-[20%] h-full self-start flex flex-col mt-3 rounded-lg p-4 drop-shadow-md gap-1\">\r\n\r\n                        {/* Tabs */}\r\n                        <Tab onClick={() => handleTabSelect(\"Customers\")} icon=\"fa-solid fa-users\">Customers</Tab>\r\n\r\n                        <Tab onClick={() => handleTabSelect(\"Payments\")} icon=\"fa-solid fa-credit-card\">Payments</Tab>\r\n\r\n                        <Tab onClick={() => handleTabSelect(\"Accounts\")} icon=\"fa-solid fa-wallet\">Accounts</Tab>\r\n\r\n                        <Tab onClick={() => handleTabSelect(\"Contacts\")} icon=\"fa-solid fa-address-book\">Contacts</Tab>\r\n\r\n                        <Tab onClick={() => handleTabSelect(\"Occupants\")} icon=\"fa-solid fa-box-open\">Occupants</Tab>\r\n\r\n                        <Tab onClick={() => handleTabSelect(\"Niches\")} icon=\"fa-solid fa-square-person-confined\">Niches</Tab>\r\n\r\n                        {/* Audit Logs*/}\r\n                        {sessionStorage.getItem(\"permissions\").split(\",\").includes(\"view_audit\") && <Tab onClick={() => handleTabSelect(\"Audit\")} icon=\"fa-solid fa-users\">Audit Logs</Tab>}\r\n\r\n                        {/* User Account Control */}\r\n                        {sessionStorage.getItem(\"permissions\").split(\",\").includes(\"manage_users\") &&\r\n                        <Tab onClick={() => handleTabSelect(\"Users\")} icon=\"fa-solid fa-user-shield\">User Management</Tab>}\r\n\r\n\r\n                        <Tab onClick={() => handleTabSelect(\"Analytics\")} icon=\"fa-solid fa-chart-simple\">Analytics</Tab>\r\n                    </div>}\r\n\r\n                    \r\n                    {/* Main Content */}\r\n                    <div className=\"content transition-all duration-300 ease-out bg-white w-full h-full flex flex-col mt-3 rounded-lg p-4 drop-shadow-md overflow-auto\">\r\n\r\n                        {/* Dynamic Tab Content rendered from a small config to keep things DRY */}\r\n                        {(() => {\r\n                            const tabs = {\r\n                                Customers: {\r\n                                    columns: [\r\n                                        {label: \"\", key: \"_select\" },\r\n                                        { label: \"Customer ID\", key: \"id\", type: 'number' },\r\n                                        { label: \"Full Name\", key: \"name\", type: 'text' },\r\n                                        { label: \"Contact Number\", key: \"contactNumber\", type: 'text' },\r\n                                        { label: \"Email\", key: \"email\", type: 'text' },\r\n                                        { label: \"Address\", key: \"address\", type: 'text' },\r\n                                        { label: \"Deceased's Name\", key: \"deceasedName\", type: 'text' },\r\n                                        { label: \"Date Deceased\", key: \"deceasedDate\", type: 'date' },\r\n                                        { label: \"Relationship to Deceased\", key: \"relationshipToDeceased\", type: 'text' }\r\n                                    ],\r\n                                    toolbarButtons: [\r\n                                        { label: 'Add Customer', icon: 'fa-solid fa-plus', bg: 'bg-blue-500', textClass: 'text-white', onClick: () => setOpenCreateModal(true) },\r\n                                        { label: 'Edit Selected', icon: 'fa-solid fa-pencil', onClick: (e) => { handleEditClick(e) } },\r\n                                        { label: `(${selectedElements.length}) Remove Selected`, icon: 'fa fa-trash', bg: 'bg-red-500', textClass: 'text-white', onClick: (e) => { handleRemoveSelected(e) } },\r\n                                    ],\r\n                                    rowRenderer: (row) => (\r\n                                        <>\r\n                                            <td className=\"p-2\">#{(row.id ?? '').toString().padStart(3, \"0\")}</td>\r\n                                            <td className=\"p-2\">{row.name ?? ''}</td>\r\n                                            <td className=\"p-2\">{row.contactNumber ?? ''}</td>\r\n                                            <td className=\"p-2\">{row.email ?? ''}</td>\r\n                                            <td className=\"p-2\">{row.address ?? ''}</td>\r\n                                            <td className=\"p-2\">{row.deceasedName ?? ''}</td>\r\n                                            <td className=\"p-2\">{row.deceasedDate ?? ''}</td>\r\n                                            <td className=\"p-2\">{row.relationshipToDeceased ?? ''}</td>\r\n                                        </>\r\n                                    )\r\n                                },\r\n                                Payments: {\r\n                                    columns: [\r\n                                        { label: \"\", key: \"_select\" },\r\n                                        { label: \"Payment ID\", key: \"id\", type: 'number' },\r\n                                        { label: \"Customer Name\", key: \"payer\", type: 'text' },\r\n                                        { label: \"Amount Paid\", key: \"amountPaid\", type: 'number' },\r\n                                        { label: \"Amount Due\", key: \"amountDue\", type: 'number' },\r\n                                        { label: \"Remaining Balance\", key: \"remainingBalance\", type: 'number' },\r\n                                        { label: \"Maintenance Fee\", key: \"maintenanceFee\", type: 'number' },\r\n                                        { label: \"Date Paid\", key: \"paymentDate\", type: 'date' },\r\n                                        { label: \"Status\", key: \"status\", type: 'text' }\r\n                                    ],\r\n                                    toolbarButtons: [\r\n                                        { label: 'Add Payment', icon: 'fa-solid fa-plus', bg: 'bg-blue-500', textClass: 'text-white', onClick: async () => { await fetchCustomerOptions(); setOpenCreateModal(true); } },\r\n                                        { label: 'Edit Selected', icon: 'fa-solid fa-pencil', onClick: (e) => { handleEditClick(e) } },\r\n                                        { label: `(${selectedElements.length}) Remove Selected`, icon: 'fa fa-trash', bg: 'bg-red-500', textClass: 'text-white', onClick: (e) => { handleRemoveSelected(e) } },\r\n                                    ],\r\n                                    rowRenderer: (row) => (\r\n                                        <>\r\n                        <td className=\"p-2\">#{(row.id ?? '').toString().padStart(3, \"0\")}</td>\r\n                        <td className=\"p-2\">{(function(){\r\n                            // prefer 'payer' field; it may contain either the customer id or the name\r\n                            const payerVal = row.payer ?? row.payer_id ?? row.payerId ?? null;\r\n                            // if payerVal matches an option value, show the option label\r\n                            const opt = customerOptions.find(o => String(o.value) === String(payerVal));\r\n                            if (opt) return opt.label;\r\n                            // otherwise show the raw value (name) if present\r\n                            return payerVal ?? '';\r\n                        })()}</td>\r\n                        <td className=\"p-2\"> {Number(row.amountPaid ?? row.amountPaid ?? row.amount_paid ?? 0).toLocaleString(\"en-US\", {minimumFractionDigits: 2 })}</td>\r\n                        <td className=\"p-2\"> {Number(row.amountDue ?? row.amount_due ?? 0).toLocaleString(\"en-US\", { minimumFractionDigits: 2 })}</td>\r\n                        <td className=\"p-2\"> {Number(row.remainingBalance ?? row.remaining_balance ?? 0).toLocaleString(\"en-US\", { minimumFractionDigits: 2 })}</td>\r\n                        <td className=\"p-2\"> {Number(row.maintenanceFee ?? row.maintenance_fee ?? 0).toLocaleString(\"en-US\", { minimumFractionDigits: 2 })}</td>\r\n                        <td className=\"p-2\">{row.paymentDate ? new Intl.DateTimeFormat('en-US').format(new Date(row.paymentDate)) : ''}</td>\r\n                        <td className=\"p-2\"><StatusTag status={row.status ?? row.state ?? ''} />\r\n                                    </td>\r\n                                        </>\r\n                                    )\r\n                                },\r\n\r\n                                Accounts: {\r\n                                    columns: [\r\n                                        { label: \"\", key: \"_select\" },\r\n                                        { label: \"Account ID\", key: \"id\", type: 'number' },\r\n                                        { label: \"Customer Name\", key: \"customerName\", type: 'text'}\r\n                                    ],\r\n                                    toolbarButtons: [\r\n                                        \r\n                                    ],\r\n                                    rowRenderer: (row) => {\r\n                                        <>\r\n                                            <td className=\"p-2\">{ row.id ?? '' }</td>\r\n                                            <td className=\"p-2\">{ row.customerName ?? '' }</td>\r\n                                        </>\r\n                                    }\r\n                                },\r\n\r\n                                Transactions: {\r\n                                    columns: [\r\n                                        { label: \"\", key: \"_select\" },\r\n                                        { label: \"Transaction #\", key: \"id\", type: 'number' },\r\n                                        { label: \"Account\", key: \"account\", type: 'text' },\r\n                                        { label: \"Date of Transaction\", key:\"date\", type: 'date'},\r\n                                        { label: \"Type of Transaction\", key:\"type\", type: \"text\"},\r\n                                        { label: \"Processed By\", key:\"processedBy\", type:\"text\"},\r\n                                    ],\r\n\r\n                                    toolbarButtons: [\r\n                                        { label: \"Add Transaction\", icon: \"fa-solid fa-plus\", onClick: setOpenCreateModal },\r\n                                        { label: \"Edit Selected\", icon: \"fa-solid fa-pen-to-square\", onClick: handleEditClick },\r\n                                        { label: \"Remove Selected\", icon: \"fa-solid fa-trash\", onClick: handleRemoveSelected },\r\n                                    ],\r\n\r\n                                    rowRenderer: (row) => (\r\n                                        <>\r\n                                            <td className=\"p-2\">{ row.id ? row.id.padStart(3, \"0\") : '' }</td>\r\n                                            <td className=\"p-2\">{ row.account ?? '' }</td>\r\n                                            <td className=\"p-2\">{ row.date ? new Intl.DateTimeFormat('en-US').format(new Date(row.date)) : '' }</td>\r\n                                            <td className=\"p-2\">{ row.type ?? '' }</td>\r\n                                            <td className=\"p-2\">{ row.processedBy ?? '' }</td>\r\n                                        </>\r\n                                    )\r\n\r\n\r\n                                },\r\n\r\n                                Contacts: {\r\n                                    columns: [\r\n                                        { label: \"\", key: \"_select\" },\r\n                                        { label: \"Contact ID\", key: \"id\", type: 'number' },\r\n                                        { label: \"Family Name\", key: \"familyName\", type: 'text' },\r\n                                        { label: \"Deceased's Name\", key: \"deceasedName\", type: 'text' },\r\n                                        { label: \"Deceased Date\", key: \"deceasedDate\", type: 'date' },\r\n                                        { label: \"Address\", key: \"address\", type: 'text' },\r\n                                        { label: \"Contact Number\", key: \"contactNumber\", type: 'text' }\r\n                                    ],\r\n                                    toolbarButtons: [\r\n                                        { label: 'Add Contact', icon: 'fa-solid fa-plus', bg: 'bg-blue-500', textClass: 'text-white', onClick: () => setOpenCreateModal(true) },\r\n                                        { label: 'Edit Selected', icon: 'fa-solid fa-pencil', onClick: (e) => { handleEditClick(e) } },\r\n                                        { label: `(${selectedElements.length}) Remove Selected`, icon: 'fa fa-trash', textClass:'text-white', bg: 'bg-red-500 text-white', onClick: handleRemoveSelected },\r\n                                    ],\r\n                                    rowRenderer: (row) => (\r\n                                        <>\r\n                                            <td className=\"p-2\">#{(row.id ?? '').toString().padStart(3, \"0\")}</td>\r\n                                            <td className=\"p-2\">{row.familyName ?? ''}</td>\r\n                                            <td className=\"p-2\">{row.deceasedName ?? ''}</td>\r\n                                            <td className=\"p-2\">{row.deceasedDate ? new Intl.DateTimeFormat('en-US').format(new Date(row.deceasedDate)) : ''}</td>\r\n                                            <td className=\"p-2\">{row.address ?? ''}</td>\r\n                                            <td className=\"p-2\">{row.contactNumber ?? ''}</td>\r\n                                            <td className=\"p-2\"><StatusTag status={row.status ?? ''} />\r\n                                    </td>\r\n                                        </>\r\n                                    )\r\n                                },\r\n                                Occupants: {\r\n                                    columns: [\r\n                                        { label: \"\", key: \"_select\" },\r\n                                        { label: \"Occupant ID\", key: \"id\", type: 'number' },\r\n                                        { label: \"Name\", key: \"name\", type: 'text' },\r\n                                        { label: \"Date of Interment\", key: \"intermentDate\", type: 'date' },\r\n                                        { label: \"Niche\", key: \"niche\", type: 'text' }\r\n                                    ],\r\n                                    toolbarButtons: [\r\n                                        { label: 'Add Occupant', icon: 'fa-solid fa-plus', bg: 'bg-blue-500', textClass: 'text-white', onClick: async () => { await fetchNicheOptions(); setOpenCreateModal(true) }},\r\n                                        { label: 'Edit Selected', icon: 'fa-solid fa-pencil', onClick: (e) => { handleEditClick(e) } },\r\n                                        { label: `(${selectedElements.length}) Remove Selected`, icon: 'fa fa-trash', bg: 'bg-red-500', textClass: 'text-white', onClick: handleRemoveSelected },\r\n                                    ],\r\n                                    rowRenderer: (row) => (\r\n                                        <>\r\n                                            <td className=\"p-2\">#{(row.id ?? '').toString().padStart(3, \"0\")}</td>\r\n                                            <td className=\"p-2\">{row.name ?? ''}</td>\r\n                                            <td className=\"p-2\">{row.intermentDate ? new Intl.DateTimeFormat('en-US').format(new Date(row.intermentDate)) : ''}</td>\r\n                                            <td className=\"p-2\">{row.niche ?? ''}</td>\r\n                                        </>\r\n                                    )   \r\n                                },\r\n                                Niches: {\r\n                                    columns: [\r\n                                        { label: \"\", key: \"_select\" },\r\n                                        { label: \"Niche ID\", key: \"id\", type: 'number' },\r\n                                        { label: \"Amount\", key: \"amount\", type: 'number' },\r\n                                        { label: \"Location\", key: \"location\", type: 'text' },\r\n                                        { label: \"Status\", key: \"status\", type: 'text' }\r\n                                    ],\r\n                                    toolbarButtons: [\r\n                                        { label: 'Add Niche', icon: 'fa-solid fa-plus', bg: 'bg-blue-500', textClass: 'text-white', onClick: () => setOpenCreateModal(true) },\r\n                                        { label: 'Edit Selected', icon: 'fa-solid fa-pencil', onClick: handleEditClick },\r\n                                        { label: `(${selectedElements.length}) Remove Selected`, icon: 'fa fa-trash', bg: 'bg-red-500', textClass: 'text-white', onClick: handleRemoveSelected },\r\n                                    ],\r\n                                    rowRenderer: (row) => (\r\n                                        <>\r\n                                            <td className=\"p-2\">#{(row.id ?? '').toString().padStart(3, \"0\")}</td>\r\n                                            <td className=\"p-2\"> {Number(row.amount ?? 0).toLocaleString('en-US', { minimumFractionDigits: 2})}</td>\r\n                                            <td className=\"p-2\">{row.location ?? ''}</td>\r\n                                            <td className=\"p-2\"><StatusTag status={row.status ?? ''} /></td>\r\n                                        </>\r\n                                    )\r\n                                },\r\n                                Audit: {\r\n                                    columns: [\r\n                                        { label: \"User\", key: \"user\", type: 'text' },\r\n                                        { label: \"Role\", key: \"role\", type: 'text' },\r\n                                        { label: \"IP Address\", key: \"ipAddress\", type: 'text' },\r\n                                        { label: \"Object ID\", key: \"objectId\", type: 'text' },\r\n                                        { label: \"Action\", key: \"action\", type: 'text' },\r\n                                        { label: \"Application\", key: \"app\", type: 'text' },\r\n                                        { label: \"URL\", key: \"path\", type: 'text' },\r\n                                        { label: \"Timestamp\", key: \"timestamp\", type: 'date' },\r\n                                    ],\r\n                                    toolbarButtons: [],\r\n                                    rowRenderer: (row) => (\r\n                                        <>\r\n                                            <td className=\"p-2\">{row.user ?? ''}</td>\r\n                                            <td className=\"p-2\">{row.role ?? ''}</td>\r\n                                            <td className=\"p-2\">{row.ipAddress ?? ''}</td>\r\n                                            <td className=\"p-2\">{row.responseData?.ids?.join(', ') ?? ''}</td>\r\n                                            <td className=\"p-2\">{row.action ?? ''}</td>\r\n                                            <td className=\"p-2\">{row.app ?? ''}</td>\r\n                                            <td className=\"p-2\">{row.path ?? ''}</td>\r\n                                            <td className=\"p-2\">{row.timestamp ? new Intl.DateTimeFormat('en-US', {year:'numeric', month:'numeric',day:'numeric', hour:'numeric', minute:'numeric', second:'numeric'}).format(new Date(row.timestamp)) : ''}</td>\r\n                                        </>\r\n                                    )\r\n                                },\r\n                                Users: {\r\n                                    columns: [\r\n                                        { label: \"\", key: \"_select\" },\r\n                                        { label: \"User ID\", key: \"id\", type: 'number' },\r\n                                        { label: \"Username\", key: \"username\", type: 'text' },\r\n                                        { label: \"Role\", key: \"role\", type: 'text' },\r\n                                    ],\r\n                                    toolbarButtons: [\r\n                                        { label: 'Add User', icon: 'fa-solid fa-plus', bg: 'bg-blue-500', textClass: 'text-white', onClick: () => setOpenCreateModal(true) },\r\n                                        { label: 'Edit Selected', icon: 'fa-solid fa-pencil', onClick: handleEditClick },\r\n                                        { label: `(${selectedElements.length}) Remove Selected`, icon: 'fa fa-trash', bg: 'bg-red-500', textClass: 'text-white', onClick: handleRemoveSelected },\r\n                                    ],\r\n                                    rowRenderer: (row) => (\r\n                                        <>\r\n                                            \r\n                                            <td className=\"p-2\">{row.id ?? ''}</td>\r\n                                            <td className=\"p-2\">{row.username ?? ''}</td>\r\n                                            <td className=\"p-2\">{row.role ?? ''}</td>\r\n                                        </>\r\n                                    )\r\n                                }\r\n                                // Add other tabs here\r\n                            }\r\n\r\n                            const cfg = tabs[selectedTab];\r\n                            if (!cfg) return null;\r\n\r\n                            if (tableLoading) return <LoadingPage />;\r\n\r\n                            return (\r\n                                <TabContent\r\n                                    title={selectedTab}\r\n                                    searchQuery={searchQuery}\r\n                                    onSearchChange={setSearchQuery}\r\n                                    toolbarButtons={cfg.toolbarButtons}\r\n                                    columns={cfg.columns}\r\n                                    data={elements.length > 0 ? elements : []}\r\n                                    selectedItems={selectedElements}\r\n                                    onSelectAll={handleSelectAll}\r\n                                    onSelectRow={handleSelectRow}\r\n                                    getRowKey={(row) => row.id}\r\n                                    onFilterChange={(value) => setFilter(value)}\r\n                                >\r\n                                    {cfg.rowRenderer}\r\n                                </TabContent>\r\n                            )\r\n                            \r\n                        })()}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            { openCreateModal && (() => {\r\n                let fieldsToPass = fieldsByTab[selectedTab];\r\n                if (selectedTab === 'Payments') {\r\n                    // ensure options are available\r\n                    const paymentsFields = (fieldsByTab.Payments || []).map(f => ({ ...f }));\r\n                    // replace payerId field with select options\r\n                    const baseOpts = customerOptions.length ? customerOptions : [{ value: '', label: 'No customers' }];\r\n                    const optsWithPrompt = [{ value: '', label: 'Select Customer' }, ...baseOpts];\r\n                    fieldsToPass = paymentsFields.map(f => f.name === 'payer' ? ({ ...f, type: 'select', options: optsWithPrompt }) : f);\r\n                } else if (selectedTab === 'Occupants') {\r\n                    const occupantFields = (fieldsByTab.Occupants || []).map(f => ({ ...f }));\r\n                    const baseOpts = nicheOptions.length ? nicheOptions : [{ value: '', label: 'No niches' }];\r\n                    const optsWithPrompt = [{ value: '', label: 'Select Niche' }, ...baseOpts];\r\n                    fieldsToPass = occupantFields.map(f => f.name === 'nicheId' ? ({ ...f, type: 'select', options: optsWithPrompt }) : f);\r\n                }\r\n\r\n                return <CreateNewElement tab={selectedTab} onCreate={handleCreate} fields={fieldsToPass} />\r\n            })() }\r\n            { /* EditElement modal can be added here similarly when needed */ }\r\n            { showEditModal && (() => {\r\n                let editFields = fieldsByTab[selectedTab];\r\n                if (selectedTab === 'Payments') {\r\n                    const paymentsFields = (fieldsByTab.Payments || []).map(f => ({ ...f }));\r\n                    const baseEditOpts = customerOptions.length ? customerOptions : [{ value: '', label: 'No customers' }];\r\n                    const editOptsWithPrompt = [{ value: '', label: 'Select Customer' }, ...baseEditOpts];\r\n                    editFields = paymentsFields.map(f => f.name === 'payer' ? ({ ...f, type: 'select', options: editOptsWithPrompt }) : f);\r\n                }\r\n                return <EditElement tab={selectedTab} elementData={elementToEdit} fields={editFields} onEdit={handleEdit} />\r\n            })()}\r\n\r\n            <div ref={accountModalRef}>\r\n                <AccountModal isOpen={openAccountModal} username={username} role={sessionStorage.getItem(\"role\") || 'Staff'} />\r\n            </div>\r\n        </div>\r\n    )\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
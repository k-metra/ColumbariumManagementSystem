{"ast":null,"code":"import _objectSpread from\"C:/Users/LenovO/Documents/OtherProjects/ColumbariumManagementSystem/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import Icon from\"../icon\";import{useState,useEffect}from\"react\";import{useAuth}from\"../../contexts/AuthContext\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function LoginForm(){const[credentials,setCredentials]=useState({username:\"\",password:\"\"});const{setUsername,setAuthenticated,setToken}=useAuth();const[error,setError]=useState(\"\");const navigate=useNavigate();useEffect(()=>{setError(\"\");},[credentials]);async function onSubmit(e){e.preventDefault();await fetch('https://columbariummanagementsystembackend.onrender.com//api/users/login-api/',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(credentials),credentials:'include'}).then(response=>response.json()).then(data=>{if(data.error){setError(data.error);return;}if(data.session_token){setToken(data.session_token);setUsername(data.user.username);setAuthenticated(true);sessionStorage.setItem('token',data.session_token);sessionStorage.setItem('username',data.user.username);sessionStorage.setItem('role',data.user.role);sessionStorage.setItem('permissions',data.user.permissions);navigate('/dashboard');}else{setError(data.error||\"Login failed\");}}).catch(err=>{console.error(err);setError(\"An error occurred\");});}return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 m-2 border rounded-md min-w-12 min-h-12 shadow-md bg-white\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl font-bold mb-4 text-[rgb(60,60,60)] text-center\",children:\"Admin Login\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:onSubmit,className:\"flex flex-col gap-4\",children:[error!==\"\"&&/*#__PURE__*/_jsx(\"span\",{className:\"text-md text-red-400 text-center\",children:error}),/*#__PURE__*/_jsxs(\"div\",{id:\"field\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block mb-1 text-sm text-zinc-600 \",htmlFor:\"username\",children:\"Username\"}),/*#__PURE__*/_jsx(\"input\",{onChange:e=>{setCredentials(_objectSpread(_objectSpread({},credentials),{},{username:e.target.value}));},className:\"w-full outline-none p-2 border rounded-md transition-all duration-300 ease-out shadow-inner hover:shadow-transparent focus:shadow-transparent focus:outline-blue-500\",type:\"text\",id:\"username\",name:\"username\",placeholder:\"Enter your username\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{id:\"field\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block mb-1 text-sm text-zinc-600 \",htmlFor:\"password\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{onChange:e=>{setCredentials(_objectSpread(_objectSpread({},credentials),{},{password:e.target.value}));},className:\"w-full outline-none p-2 border rounded-md transition-all duration-300 ease-out shadow-inner hover:shadow-transparent focus:shadow-transparent focus:outline-blue-500\",type:\"password\",id:\"password\",name:\"password\",placeholder:\"Enter your password\",required:true})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"w-full drop-shadow-md p-2 bg-blue-500 text-white rounded-md transition-all duration-200 ease-out  hover:bg-blue-600 hover:-translate-y-1\",type:\"submit\",children:[\"Login \",/*#__PURE__*/_jsx(Icon,{icon:\"fa-solid fa-arrow-right\",className:\"inline ml-1\"}),\" \"]})]})]});}","map":{"version":3,"names":["Icon","useState","useEffect","useAuth","useNavigate","jsx","_jsx","jsxs","_jsxs","LoginForm","credentials","setCredentials","username","password","setUsername","setAuthenticated","setToken","error","setError","navigate","onSubmit","e","preventDefault","fetch","method","headers","body","JSON","stringify","then","response","json","data","session_token","user","sessionStorage","setItem","role","permissions","catch","err","console","className","children","id","htmlFor","onChange","_objectSpread","target","value","type","name","placeholder","required","icon"],"sources":["C:/Users/LenovO/Documents/OtherProjects/ColumbariumManagementSystem/frontend/src/components/login/loginForm.js"],"sourcesContent":["import Icon from \"../icon\";\r\n\r\nimport { useState, useEffect } from \"react\"; \r\nimport { useAuth } from \"../../contexts/AuthContext\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nexport default function LoginForm() {\r\n    const [credentials, setCredentials] = useState({username: \"\", password: \"\"});\r\n    const { setUsername, setAuthenticated, setToken } = useAuth();\r\n    const [error, setError] = useState(\"\");\r\n    const navigate = useNavigate();\r\n\r\n    useEffect(() => {\r\n        setError(\"\");\r\n    }, [credentials])\r\n\r\n    async function onSubmit(e) {\r\n        e.preventDefault();\r\n\r\n        await fetch('https://columbariummanagementsystembackend.onrender.com//api/users/login-api/', {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify(credentials),\r\n            credentials: 'include',\r\n        })\r\n        .then(response => response.json())\r\n        .then(data => {\r\n            if (data.error) {\r\n                setError(data.error);\r\n                return;\r\n            }\r\n\r\n            if (data.session_token) {\r\n                setToken(data.session_token);\r\n                setUsername(data.user.username);\r\n                setAuthenticated(true);\r\n\r\n                sessionStorage.setItem('token', data.session_token);\r\n                sessionStorage.setItem('username', data.user.username);\r\n                sessionStorage.setItem('role', data.user.role);\r\n                sessionStorage.setItem('permissions', data.user.permissions);\r\n                navigate('/dashboard');\r\n            } else {\r\n                setError(data.error || \"Login failed\");\r\n            }\r\n        })\r\n        .catch(err => {\r\n            console.error(err);\r\n            setError(\"An error occurred\");\r\n        });\r\n    }\r\n\r\n    return (\r\n        <div className=\"p-6 m-2 border rounded-md min-w-12 min-h-12 shadow-md bg-white\">\r\n            <div className=\"text-2xl font-bold mb-4 text-[rgb(60,60,60)] text-center\">Admin Login</div>\r\n            <form onSubmit={onSubmit} className=\"flex flex-col gap-4\">\r\n                { error !== \"\" && <span className=\"text-md text-red-400 text-center\">{error}</span>}\r\n                <div id=\"field\">\r\n                    <label className=\"block mb-1 text-sm text-zinc-600 \" htmlFor=\"username\">Username</label>\r\n                    <input onChange={(e) => {setCredentials({...credentials, username: e.target.value})}} className=\"w-full outline-none p-2 border rounded-md transition-all duration-300 ease-out shadow-inner hover:shadow-transparent focus:shadow-transparent focus:outline-blue-500\" type=\"text\" id=\"username\" name=\"username\" placeholder=\"Enter your username\" required />\r\n                </div>\r\n                <div id=\"field\">\r\n                    <label className=\"block mb-1 text-sm text-zinc-600 \" htmlFor=\"password\">Password</label>\r\n                    <input onChange={(e) => {setCredentials({...credentials, password: e.target.value})}} className=\"w-full outline-none p-2 border rounded-md transition-all duration-300 ease-out shadow-inner hover:shadow-transparent focus:shadow-transparent focus:outline-blue-500\" type=\"password\" id=\"password\" name=\"password\" placeholder=\"Enter your password\" required />\r\n                </div>\r\n                <button className=\"w-full drop-shadow-md p-2 bg-blue-500 text-white rounded-md transition-all duration-200 ease-out  hover:bg-blue-600 hover:-translate-y-1\" type=\"submit\">\r\n                    Login <Icon icon=\"fa-solid fa-arrow-right\" className=\"inline ml-1\" /> </button>\r\n            </form>\r\n        </div>\r\n    )\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}